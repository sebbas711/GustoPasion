<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:fragment
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui">
    <div class="container">
        <h2 style="color:#980505"><b>#{msjRadicarPQRS.ConsultarPQRS}</b></h2>
        <h:form prependId="false">
            <p:dataTable value="#{pqrsControlador.pqrs}" 
                             rows="5"
                             paginator="true"
                             paginatorPosition="bottom"
                             rowsPerPageTemplate="5,10,15"
                             reflow="true"
                             var="pq"
                             id="tablaPqrs">
                    <p:column headerText="#{msjPQRS.ID}" priority="2" style="width: 40px">
                        <center>
                            <h:outputText value="#{pq.id}"/>
                        </center>
                    </p:column>
                    <p:column headerText="#{msjPQRS.TIPO}" priority="2" style="width: 90px">
                        <center>
                            <h:outputText value="#{pq.tipoPQRS.nombre}"/>
                        </center>
                    </p:column>
                    <p:column headerText="#{msjPQRS.ADMINISTRADOR}" priority="2" style="width: 140px">
                        <center>
                            <h:outputText value="#{pq.administrador.usuario.primerNombre} #{pq.administrador.usuario.primerApellido}"/>
                        </center>
                    </p:column>
                    <p:column headerText="#{msjPQRS.FECHA}" priority="2" style="width: 120px">
                        <center>
                            <h:outputText value="#{pq.fecha}">
                                <f:convertDateTime pattern="yyyy-MM-dd"/>
                            </h:outputText>
                        </center>
                    </p:column>
                    <p:column headerText="#{msjPQRS.ESTADO}" priority="2" style="width: 110px">
                        <center>
                            <h:outputText value="#{pq.estadoPqrs.descripcion}"/>
                        </center>
                    </p:column>
                    <p:column headerText="#{msjPQRS.OPCIONES}" priority="2" style="width: 80px">
                        <h:commandLink  class="btn" 
                                        style="background: #951010; color: white; margin-left: 15px; margin-top: 5px; display: inline-block" 
                                        title="Modificar" 
                                        a:data-toggle="modal" a:data-target="#responderInfoPQRS"
                                        action="#{controlPqrsView.seleccionarPqrs(pq)}">
                            <i class="fa fa-eye"></i>
                            <f:ajax render=":responderPQRSContent" />
                        </h:commandLink>
                        <h:commandLink  class="btn" 
                                        style="background: #951010; color: white; margin-left: 15px; margin-top: 5px; display: inline-block" 
                                        title="Modificar" 
                                        a:data-toggle="modal" a:data-target="#responderInfoPQRS"
                                        action="#{controlPqrsView.seleccionarPqrs(pq)}">
                            <i class="fa fa-pencil"></i>
                            <f:ajax render=":responderPQRSContent" />
                        </h:commandLink>
                    </p:column>
                </p:dataTable>
        </h:form>    
    </div>
    <br/>
</ui:fragment>